{"ast":null,"code":"import{useState}from'react';import{useNavigate}from'react-router-dom';import{registerUser}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Register(){const navigate=useNavigate();const[name,setName]=useState('');const[username,setUsername]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[role,setRole]=useState('heartSmiles');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const onSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{const payload={name,username,email,password,role};console.log('Sending registration payload:',payload);const response=await registerUser(payload);console.log('Registration response:',response);navigate('/login');}catch(err){var _err$response,_err$response2,_err$response2$data,_err$response3,_err$response3$data;console.error('Registration error:',err);console.error('Error response:',err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data);setError((err===null||err===void 0?void 0:(_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||(err===null||err===void 0?void 0:(_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||'Registration failed');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:420,margin:'60px auto'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create Staff Account\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{value:name,onChange:e=>setName(e.target.value),required:true,style:{width:'100%'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{value:username,onChange:e=>setUsername(e.target.value),required:true,style:{width:'100%'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true,style:{width:'100%'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true,style:{width:'100%'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Role\"}),/*#__PURE__*/_jsxs(\"select\",{value:role,onChange:e=>setRole(e.target.value),style:{width:'100%'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"heartSmiles\",children:\"HeartSmiles\"}),/*#__PURE__*/_jsx(\"option\",{value:\"umd\",children:\"University of Maryland\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',marginBottom:12},children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?'Creating...':'Create Account'})]})]});}","map":{"version":3,"names":["useState","useNavigate","registerUser","jsx","_jsx","jsxs","_jsxs","Register","navigate","name","setName","username","setUsername","email","setEmail","password","setPassword","role","setRole","loading","setLoading","error","setError","onSubmit","e","preventDefault","payload","console","log","response","err","_err$response","_err$response2","_err$response2$data","_err$response3","_err$response3$data","data","message","style","maxWidth","margin","children","marginBottom","value","onChange","target","required","width","type","color","disabled"],"sources":["/Users/sareena/HeartSmiles/heart-smiles-tracker/src/pages/Register.jsx"],"sourcesContent":["import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { registerUser } from '../services/api';\n\nexport default function Register() {\n  const navigate = useNavigate();\n  const [name, setName] = useState('');\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [role, setRole] = useState('heartSmiles');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    try {\n      const payload = { name, username, email, password, role };\n      console.log('Sending registration payload:', payload);\n      const response = await registerUser(payload);\n      console.log('Registration response:', response);\n      navigate('/login');\n    } catch (err) {\n      console.error('Registration error:', err);\n      console.error('Error response:', err?.response?.data);\n      setError(err?.response?.data?.error || err?.response?.data?.message || 'Registration failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div style={{ maxWidth: 420, margin: '60px auto' }}>\n      <h2>Create Staff Account</h2>\n      <form onSubmit={onSubmit}>\n        <div style={{ marginBottom: 12 }}>\n          <label>Name</label>\n          <input value={name} onChange={(e) => setName(e.target.value)} required style={{ width: '100%' }} />\n        </div>\n        <div style={{ marginBottom: 12 }}>\n          <label>Username</label>\n          <input value={username} onChange={(e) => setUsername(e.target.value)} required style={{ width: '100%' }} />\n        </div>\n        <div style={{ marginBottom: 12 }}>\n          <label>Email</label>\n          <input type=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} required style={{ width: '100%' }} />\n        </div>\n        <div style={{ marginBottom: 12 }}>\n          <label>Password</label>\n          <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} required style={{ width: '100%' }} />\n        </div>\n        <div style={{ marginBottom: 12 }}>\n          <label>Role</label>\n          <select value={role} onChange={(e) => setRole(e.target.value)} style={{ width: '100%' }}>\n            <option value=\"heartSmiles\">HeartSmiles</option>\n            <option value=\"umd\">University of Maryland</option>\n          </select>\n        </div>\n        {error && <div style={{ color: 'red', marginBottom: 12 }}>{error}</div>}\n        <button type=\"submit\" disabled={loading}>{loading ? 'Creating...' : 'Create Account'}</button>\n      </form>\n    </div>\n  );\n}\n"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,YAAY,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,cAAe,SAAS,CAAAC,QAAQA,CAAA,CAAG,CACjC,KAAM,CAAAC,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACQ,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACW,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACe,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACiB,IAAI,CAAEC,OAAO,CAAC,CAAGlB,QAAQ,CAAC,aAAa,CAAC,CAC/C,KAAM,CAACmB,OAAO,CAAEC,UAAU,CAAC,CAAGpB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACqB,KAAK,CAAEC,QAAQ,CAAC,CAAGtB,QAAQ,CAAC,EAAE,CAAC,CAEtC,KAAM,CAAAuB,QAAQ,CAAG,KAAO,CAAAC,CAAC,EAAK,CAC5BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBL,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,EAAE,CAAC,CACZ,GAAI,CACF,KAAM,CAAAI,OAAO,CAAG,CAAEjB,IAAI,CAAEE,QAAQ,CAAEE,KAAK,CAAEE,QAAQ,CAAEE,IAAK,CAAC,CACzDU,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAEF,OAAO,CAAC,CACrD,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAA3B,YAAY,CAACwB,OAAO,CAAC,CAC5CC,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEC,QAAQ,CAAC,CAC/CrB,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAE,MAAOsB,GAAG,CAAE,KAAAC,aAAA,CAAAC,cAAA,CAAAC,mBAAA,CAAAC,cAAA,CAAAC,mBAAA,CACZR,OAAO,CAACN,KAAK,CAAC,qBAAqB,CAAES,GAAG,CAAC,CACzCH,OAAO,CAACN,KAAK,CAAC,iBAAiB,CAAES,GAAG,SAAHA,GAAG,kBAAAC,aAAA,CAAHD,GAAG,CAAED,QAAQ,UAAAE,aAAA,iBAAbA,aAAA,CAAeK,IAAI,CAAC,CACrDd,QAAQ,CAAC,CAAAQ,GAAG,SAAHA,GAAG,kBAAAE,cAAA,CAAHF,GAAG,CAAED,QAAQ,UAAAG,cAAA,kBAAAC,mBAAA,CAAbD,cAAA,CAAeI,IAAI,UAAAH,mBAAA,iBAAnBA,mBAAA,CAAqBZ,KAAK,IAAIS,GAAG,SAAHA,GAAG,kBAAAI,cAAA,CAAHJ,GAAG,CAAED,QAAQ,UAAAK,cAAA,kBAAAC,mBAAA,CAAbD,cAAA,CAAeE,IAAI,UAAAD,mBAAA,iBAAnBA,mBAAA,CAAqBE,OAAO,GAAI,qBAAqB,CAAC,CAC/F,CAAC,OAAS,CACRjB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,mBACEd,KAAA,QAAKgC,KAAK,CAAE,CAAEC,QAAQ,CAAE,GAAG,CAAEC,MAAM,CAAE,WAAY,CAAE,CAAAC,QAAA,eACjDrC,IAAA,OAAAqC,QAAA,CAAI,sBAAoB,CAAI,CAAC,cAC7BnC,KAAA,SAAMiB,QAAQ,CAAEA,QAAS,CAAAkB,QAAA,eACvBnC,KAAA,QAAKgC,KAAK,CAAE,CAAEI,YAAY,CAAE,EAAG,CAAE,CAAAD,QAAA,eAC/BrC,IAAA,UAAAqC,QAAA,CAAO,MAAI,CAAO,CAAC,cACnBrC,IAAA,UAAOuC,KAAK,CAAElC,IAAK,CAACmC,QAAQ,CAAGpB,CAAC,EAAKd,OAAO,CAACc,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAACG,QAAQ,MAACR,KAAK,CAAE,CAAES,KAAK,CAAE,MAAO,CAAE,CAAE,CAAC,EAChG,CAAC,cACNzC,KAAA,QAAKgC,KAAK,CAAE,CAAEI,YAAY,CAAE,EAAG,CAAE,CAAAD,QAAA,eAC/BrC,IAAA,UAAAqC,QAAA,CAAO,UAAQ,CAAO,CAAC,cACvBrC,IAAA,UAAOuC,KAAK,CAAEhC,QAAS,CAACiC,QAAQ,CAAGpB,CAAC,EAAKZ,WAAW,CAACY,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAACG,QAAQ,MAACR,KAAK,CAAE,CAAES,KAAK,CAAE,MAAO,CAAE,CAAE,CAAC,EACxG,CAAC,cACNzC,KAAA,QAAKgC,KAAK,CAAE,CAAEI,YAAY,CAAE,EAAG,CAAE,CAAAD,QAAA,eAC/BrC,IAAA,UAAAqC,QAAA,CAAO,OAAK,CAAO,CAAC,cACpBrC,IAAA,UAAO4C,IAAI,CAAC,OAAO,CAACL,KAAK,CAAE9B,KAAM,CAAC+B,QAAQ,CAAGpB,CAAC,EAAKV,QAAQ,CAACU,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAACG,QAAQ,MAACR,KAAK,CAAE,CAAES,KAAK,CAAE,MAAO,CAAE,CAAE,CAAC,EAC/G,CAAC,cACNzC,KAAA,QAAKgC,KAAK,CAAE,CAAEI,YAAY,CAAE,EAAG,CAAE,CAAAD,QAAA,eAC/BrC,IAAA,UAAAqC,QAAA,CAAO,UAAQ,CAAO,CAAC,cACvBrC,IAAA,UAAO4C,IAAI,CAAC,UAAU,CAACL,KAAK,CAAE5B,QAAS,CAAC6B,QAAQ,CAAGpB,CAAC,EAAKR,WAAW,CAACQ,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAACG,QAAQ,MAACR,KAAK,CAAE,CAAES,KAAK,CAAE,MAAO,CAAE,CAAE,CAAC,EACxH,CAAC,cACNzC,KAAA,QAAKgC,KAAK,CAAE,CAAEI,YAAY,CAAE,EAAG,CAAE,CAAAD,QAAA,eAC/BrC,IAAA,UAAAqC,QAAA,CAAO,MAAI,CAAO,CAAC,cACnBnC,KAAA,WAAQqC,KAAK,CAAE1B,IAAK,CAAC2B,QAAQ,CAAGpB,CAAC,EAAKN,OAAO,CAACM,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAACL,KAAK,CAAE,CAAES,KAAK,CAAE,MAAO,CAAE,CAAAN,QAAA,eACtFrC,IAAA,WAAQuC,KAAK,CAAC,aAAa,CAAAF,QAAA,CAAC,aAAW,CAAQ,CAAC,cAChDrC,IAAA,WAAQuC,KAAK,CAAC,KAAK,CAAAF,QAAA,CAAC,wBAAsB,CAAQ,CAAC,EAC7C,CAAC,EACN,CAAC,CACLpB,KAAK,eAAIjB,IAAA,QAAKkC,KAAK,CAAE,CAAEW,KAAK,CAAE,KAAK,CAAEP,YAAY,CAAE,EAAG,CAAE,CAAAD,QAAA,CAAEpB,KAAK,CAAM,CAAC,cACvEjB,IAAA,WAAQ4C,IAAI,CAAC,QAAQ,CAACE,QAAQ,CAAE/B,OAAQ,CAAAsB,QAAA,CAAEtB,OAAO,CAAG,aAAa,CAAG,gBAAgB,CAAS,CAAC,EAC1F,CAAC,EACJ,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}