{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../context/AuthContext';import{fetchStaff,deleteStaff}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Staff=()=>{const{user}=useAuth();const[staff,setStaff]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[success,setSuccess]=useState('');useEffect(()=>{loadStaff();},[]);const loadStaff=async()=>{try{var _response$data;setLoading(true);const response=await fetchStaff();setStaff(((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.staff)||response.data||[]);}catch(error){console.error('Error loading staff:',error);}finally{setLoading(false);}};const handleDeleteStaff=async(staffId,staffName)=>{if(!window.confirm(\"Are you sure you want to deactivate \".concat(staffName,\"? This action cannot be undone.\"))){return;}try{setError('');setSuccess('');await deleteStaff(staffId);setSuccess(\"Staff member \".concat(staffName,\" has been deactivated successfully!\"));await loadStaff();setTimeout(()=>setSuccess(''),3000);}catch(err){var _err$response,_err$response$data;setError((err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to deactivate staff member');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',textAlign:'center'},children:/*#__PURE__*/_jsx(\"h2\",{children:\"Loading Staff...\"})});}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Staff Directory\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#666',marginBottom:'30px'},children:\"View all staff members with their roles and contact information.\"}),success&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#d4edda',color:'#155724',padding:'12px 20px',borderRadius:'6px',marginBottom:'20px',border:'1px solid #c3e6cb'},children:[\"\\u2705 \",success]}),error&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#f8d7da',color:'#721c24',padding:'12px 20px',borderRadius:'6px',marginBottom:'20px',border:'1px solid #f5c6cb'},children:[\"\\u274C \",error]}),/*#__PURE__*/_jsx(\"div\",{style:{background:'white',border:'1px solid #e1e5e9',borderRadius:'8px',overflow:'hidden'},children:staff.length>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'#f8f9fa',padding:'15px 20px',borderBottom:'1px solid #e1e5e9',fontWeight:'600',color:'#333'},children:[staff.length,\" Staff Member\",staff.length!==1?'s':'']}),staff.map((member,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',borderBottom:index<staff.length-1?'1px solid #f0f0f0':'none',display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 5px 0',color:'#333'},children:member.name}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',color:'#666',marginBottom:'5px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",member.email]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',color:'#666',marginBottom:'5px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Username:\"}),\" \",member.username,member.phoneNumber&&\" \\u2022 Phone: \".concat(member.phoneNumber)]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:member.role==='heartSmiles'?'#007bff':'#28a745',marginTop:'5px',fontWeight:'500'},children:member.role==='heartSmiles'?'HeartSmiles Staff':'University of Maryland Staff'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'8px 12px',background:member.isActive?'#d4edda':'#f8d7da',color:member.isActive?'#155724':'#721c24',borderRadius:'4px',fontSize:'12px',fontWeight:'500'},children:member.isActive?'Active':'Inactive'}),(user===null||user===void 0?void 0:user.role)==='heartSmiles'&&member.id!==user.id&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteStaff(member.id,member.name),style:{background:'#dc3545',color:'white',border:'none',padding:'6px 12px',borderRadius:'4px',cursor:'pointer',fontSize:'12px',fontWeight:'500'},children:\"Deactivate\"})]})]},member.id||index))]}):/*#__PURE__*/_jsx(\"div\",{style:{padding:'40px',textAlign:'center',color:'#666'},children:/*#__PURE__*/_jsx(\"h3\",{children:\"No staff members found\"})})})]});};export default Staff;","map":{"version":3,"names":["React","useState","useEffect","useAuth","fetchStaff","deleteStaff","jsx","_jsx","jsxs","_jsxs","Staff","user","staff","setStaff","loading","setLoading","error","setError","success","setSuccess","loadStaff","_response$data","response","data","console","handleDeleteStaff","staffId","staffName","window","confirm","concat","setTimeout","err","_err$response","_err$response$data","style","padding","textAlign","children","color","marginBottom","background","borderRadius","border","overflow","length","borderBottom","fontWeight","map","member","index","display","justifyContent","alignItems","flex","margin","name","fontSize","email","username","phoneNumber","role","marginTop","gap","isActive","id","onClick","cursor"],"sources":["/Users/sareena/HeartSmiles/heart-smiles-tracker/src/pages/Staff.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { fetchStaff, deleteStaff } from '../services/api';\n\nconst Staff = () => {\n  const { user } = useAuth();\n  const [staff, setStaff] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  useEffect(() => {\n    loadStaff();\n  }, []);\n\n  const loadStaff = async () => {\n    try {\n      setLoading(true);\n      const response = await fetchStaff();\n      setStaff(response.data?.staff || response.data || []);\n    } catch (error) {\n      console.error('Error loading staff:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDeleteStaff = async (staffId, staffName) => {\n    if (!window.confirm(`Are you sure you want to deactivate ${staffName}? This action cannot be undone.`)) {\n      return;\n    }\n\n    try {\n      setError('');\n      setSuccess('');\n      await deleteStaff(staffId);\n      setSuccess(`Staff member ${staffName} has been deactivated successfully!`);\n      await loadStaff();\n      setTimeout(() => setSuccess(''), 3000);\n    } catch (err) {\n      setError(err?.response?.data?.error || 'Failed to deactivate staff member');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div style={{ padding: '20px', textAlign: 'center' }}>\n        <h2>Loading Staff...</h2>\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ padding: '20px' }}>\n      <h1>Staff Directory</h1>\n      <p style={{ color: '#666', marginBottom: '30px' }}>\n        View all staff members with their roles and contact information.\n      </p>\n\n      {success && (\n        <div style={{\n          background: '#d4edda',\n          color: '#155724',\n          padding: '12px 20px',\n          borderRadius: '6px',\n          marginBottom: '20px',\n          border: '1px solid #c3e6cb'\n        }}>\n          ✅ {success}\n        </div>\n      )}\n      {error && (\n        <div style={{\n          background: '#f8d7da',\n          color: '#721c24',\n          padding: '12px 20px',\n          borderRadius: '6px',\n          marginBottom: '20px',\n          border: '1px solid #f5c6cb'\n        }}>\n          ❌ {error}\n        </div>\n      )}\n\n      <div style={{\n        background: 'white',\n        border: '1px solid #e1e5e9',\n        borderRadius: '8px',\n        overflow: 'hidden'\n      }}>\n        {staff.length > 0 ? (\n          <div>\n            <div style={{\n              background: '#f8f9fa',\n              padding: '15px 20px',\n              borderBottom: '1px solid #e1e5e9',\n              fontWeight: '600',\n              color: '#333'\n            }}>\n              {staff.length} Staff Member{staff.length !== 1 ? 's' : ''}\n            </div>\n            {staff.map((member, index) => (\n              <div\n                key={member.id || index}\n                style={{\n                  padding: '20px',\n                  borderBottom: index < staff.length - 1 ? '1px solid #f0f0f0' : 'none',\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center'\n                }}\n              >\n                <div style={{ flex: 1 }}>\n                  <h4 style={{ margin: '0 0 5px 0', color: '#333' }}>\n                    {member.name}\n                  </h4>\n                  <div style={{ fontSize: '14px', color: '#666', marginBottom: '5px' }}>\n                    <strong>Email:</strong> {member.email}\n                  </div>\n                  <div style={{ fontSize: '14px', color: '#666', marginBottom: '5px' }}>\n                    <strong>Username:</strong> {member.username}\n                    {member.phoneNumber && ` • Phone: ${member.phoneNumber}`}\n                  </div>\n                  <div style={{ \n                    fontSize: '12px', \n                    color: member.role === 'heartSmiles' ? '#007bff' : '#28a745',\n                    marginTop: '5px',\n                    fontWeight: '500'\n                  }}>\n                    {member.role === 'heartSmiles' ? 'HeartSmiles Staff' : 'University of Maryland Staff'}\n                  </div>\n                </div>\n                <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n                  <div style={{\n                    padding: '8px 12px',\n                    background: member.isActive ? '#d4edda' : '#f8d7da',\n                    color: member.isActive ? '#155724' : '#721c24',\n                    borderRadius: '4px',\n                    fontSize: '12px',\n                    fontWeight: '500'\n                  }}>\n                    {member.isActive ? 'Active' : 'Inactive'}\n                  </div>\n                  {user?.role === 'heartSmiles' && member.id !== user.id && (\n                    <button\n                      onClick={() => handleDeleteStaff(member.id, member.name)}\n                      style={{\n                        background: '#dc3545',\n                        color: 'white',\n                        border: 'none',\n                        padding: '6px 12px',\n                        borderRadius: '4px',\n                        cursor: 'pointer',\n                        fontSize: '12px',\n                        fontWeight: '500'\n                      }}\n                    >\n                      Deactivate\n                    </button>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div style={{ padding: '40px', textAlign: 'center', color: '#666' }}>\n            <h3>No staff members found</h3>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Staff;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}