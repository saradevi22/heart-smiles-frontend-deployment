{"ast":null,"code":"import{useState}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{loginUser}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){const{login}=useAuth();const navigate=useNavigate();const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const onSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{console.log('Attempting login with:',{email,password:'***'});const response=await loginUser(email,password);console.log('Login response:',response);login({token:response.data.token,user:response.data.staff});navigate('/');}catch(err){var _err$response,_err$response2,_err$response2$data,_err$response3,_err$response3$data;console.error('Login error:',err);console.error('Error response:',err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data);setError((err===null||err===void 0?void 0:(_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||(err===null||err===void 0?void 0:(_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||'Login failed');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:360,margin:'80px auto'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{value:email,onChange:e=>setEmail(e.target.value),type:\"email\",required:true,style:{width:'100%'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{value:password,onChange:e=>setPassword(e.target.value),type:\"password\",required:true,style:{width:'100%'}})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',marginBottom:12},children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?'Signing in...':'Sign In'})]})]});}","map":{"version":3,"names":["useState","useNavigate","useAuth","loginUser","jsx","_jsx","jsxs","_jsxs","Login","login","navigate","email","setEmail","password","setPassword","loading","setLoading","error","setError","onSubmit","e","preventDefault","console","log","response","token","data","user","staff","err","_err$response","_err$response2","_err$response2$data","_err$response3","_err$response3$data","message","style","maxWidth","margin","children","marginBottom","value","onChange","target","type","required","width","color","disabled"],"sources":["/Users/sareena/HeartSmiles/heart-smiles-tracker/src/pages/Login.jsx"],"sourcesContent":["import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { loginUser } from '../services/api';\n\nexport default function Login() {\n  const { login } = useAuth();\n  const navigate = useNavigate();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    try {\n      console.log('Attempting login with:', { email, password: '***' });\n      const response = await loginUser(email, password);\n      console.log('Login response:', response);\n      login({ token: response.data.token, user: response.data.staff });\n      navigate('/');\n    } catch (err) {\n      console.error('Login error:', err);\n      console.error('Error response:', err?.response?.data);\n      setError(err?.response?.data?.error || err?.response?.data?.message || 'Login failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div style={{ maxWidth: 360, margin: '80px auto' }}>\n      <h2>Login</h2>\n      <form onSubmit={onSubmit}>\n        <div style={{ marginBottom: 12 }}>\n          <label>Email</label>\n          <input value={email} onChange={(e) => setEmail(e.target.value)} type=\"email\" required style={{ width: '100%' }} />\n        </div>\n        <div style={{ marginBottom: 12 }}>\n          <label>Password</label>\n          <input value={password} onChange={(e) => setPassword(e.target.value)} type=\"password\" required style={{ width: '100%' }} />\n        </div>\n        {error && <div style={{ color: 'red', marginBottom: 12 }}>{error}</div>}\n        <button type=\"submit\" disabled={loading}>{loading ? 'Signing in...' : 'Sign In'}</button>\n      </form>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}