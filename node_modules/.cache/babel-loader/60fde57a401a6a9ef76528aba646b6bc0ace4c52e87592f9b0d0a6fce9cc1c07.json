{"ast":null,"code":"var _jsxFileName = \"/Users/sareena/HeartSmiles/heart-smiles-tracker/src/pages/Export.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { exportParticipantsCsv, fetchParticipants } from '../services/api';\nimport api from '../services/api';\nimport jsPDF from 'jspdf';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Export = () => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [exportType, setExportType] = useState('participants');\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState('');\n\n  // PDF export state\n  const [allParticipants, setAllParticipants] = useState([]);\n  const [selectedParticipants, setSelectedParticipants] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showPdfExport, setShowPdfExport] = useState(false);\n  const [pdfLoading, setPdfLoading] = useState(false);\n  useEffect(() => {\n    if (showPdfExport) {\n      loadParticipants();\n    }\n  }, [showPdfExport]);\n  const loadParticipants = async () => {\n    try {\n      var _response$data;\n      const response = await fetchParticipants();\n      const participants = ((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.participants) || response.data || [];\n      const activeParticipants = participants.filter(p => p.isActive !== false);\n      setAllParticipants(activeParticipants);\n    } catch (err) {\n      console.error('Error loading participants:', err);\n      setError('Failed to load participants');\n    }\n  };\n  const handleExport = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess(false);\n      let response;\n      let filename;\n      if (exportType === 'participants') {\n        response = await exportParticipantsCsv();\n        filename = `participants_${new Date().toISOString().split('T')[0]}.csv`;\n      } else if (exportType === 'programs') {\n        response = await api.get('/export/programs', {\n          responseType: 'blob'\n        });\n        filename = `programs_${new Date().toISOString().split('T')[0]}.csv`;\n      } else {\n        response = await api.get('/export/combined', {\n          responseType: 'blob'\n        });\n        filename = `combined_data_${new Date().toISOString().split('T')[0]}.csv`;\n      }\n\n      // Create download link\n      const url = window.URL.createObjectURL(new Blob([response.data], {\n        type: 'text/csv'\n      }));\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = filename;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n      setSuccess(true);\n      setTimeout(() => setSuccess(false), 3000);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Export error:', err);\n      setError((err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Export failed. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Helper function to convert image URL to base64\n  const imageToBase64 = url => {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.crossOrigin = 'anonymous';\n      img.onload = () => {\n        const canvas = document.createElement('canvas');\n        canvas.width = img.width;\n        canvas.height = img.height;\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(img, 0, 0);\n        try {\n          const base64 = canvas.toDataURL('image/jpeg', 0.8);\n          resolve(base64);\n        } catch (e) {\n          reject(e);\n        }\n      };\n      img.onerror = () => {\n        // If image fails to load, return null\n        resolve(null);\n      };\n      img.src = url;\n    });\n  };\n  const handlePdfExport = async () => {\n    if (selectedParticipants.length === 0) {\n      setError('Please select at least one participant');\n      return;\n    }\n    try {\n      setPdfLoading(true);\n      setError('');\n      setSuccess(false);\n      const pdf = new jsPDF('portrait', 'mm', 'a4');\n      const pageWidth = pdf.internal.pageSize.getWidth();\n      const pageHeight = pdf.internal.pageSize.getHeight();\n      const margin = 15;\n      const contentWidth = pageWidth - margin * 2;\n      const participantWidth = (contentWidth - 10) / 2; // Two participants per row, 10mm gap\n      const participantHeight = 80; // Height for each participant card\n\n      let currentY = margin;\n      let participantIndex = 0;\n      while (participantIndex < selectedParticipants.length) {\n        // Check if we need a new page\n        if (currentY + participantHeight > pageHeight - margin) {\n          pdf.addPage();\n          currentY = margin;\n        }\n\n        // Process two participants per row\n        for (let col = 0; col < 2 && participantIndex < selectedParticipants.length; col++) {\n          var _participant$headshot;\n          const participant = selectedParticipants[participantIndex];\n          const x = margin + col * (participantWidth + 10);\n\n          // Get participant data\n          const name = participant.name || 'N/A';\n          const address = participant.address || 'N/A';\n          const idNumber = participant.identificationNumber || 'N/A';\n          const photoUrl = ((_participant$headshot = participant.headshotPictureUrl) === null || _participant$headshot === void 0 ? void 0 : _participant$headshot.url) || participant.headshotPictureUrl || null;\n\n          // Draw border for participant card\n          pdf.setDrawColor(200, 200, 200);\n          pdf.setLineWidth(0.5);\n          pdf.rect(x, currentY, participantWidth, participantHeight);\n\n          // Add profile photo\n          if (photoUrl) {\n            try {\n              const base64Image = await imageToBase64(photoUrl);\n              if (base64Image) {\n                const imgWidth = 30;\n                const imgHeight = 30;\n                pdf.addImage(base64Image, 'JPEG', x + 5, currentY + 5, imgWidth, imgHeight);\n              }\n            } catch (e) {\n              console.error('Error loading image:', e);\n            }\n          }\n\n          // Add participant information\n          const textX = photoUrl ? x + 40 : x + 5;\n          let textY = currentY + 10;\n\n          // Name\n          pdf.setFontSize(12);\n          pdf.setFont(undefined, 'bold');\n          pdf.text(name, textX, textY);\n          textY += 7;\n\n          // ID Number\n          pdf.setFontSize(10);\n          pdf.setFont(undefined, 'normal');\n          pdf.text(`ID: ${idNumber}`, textX, textY);\n          textY += 6;\n\n          // Address (may need to wrap)\n          pdf.setFontSize(9);\n          const addressLines = pdf.splitTextToSize(`Address: ${address}`, participantWidth - 45);\n          pdf.text(addressLines, textX, textY);\n          participantIndex++;\n        }\n\n        // Move to next row\n        currentY += participantHeight + 5;\n      }\n\n      // Save PDF\n      const filename = `participants_export_${new Date().toISOString().split('T')[0]}.pdf`;\n      pdf.save(filename);\n      setSuccess(`PDF exported successfully with ${selectedParticipants.length} participant(s)!`);\n      setTimeout(() => setSuccess(''), 3000);\n      setSelectedParticipants([]);\n      setSearchTerm('');\n    } catch (err) {\n      console.error('PDF export error:', err);\n      setError('Failed to generate PDF. Please try again.');\n    } finally {\n      setPdfLoading(false);\n    }\n  };\n  const filteredParticipants = allParticipants.filter(p => {\n    var _p$name, _p$identificationNumb, _p$address;\n    const searchLower = searchTerm.toLowerCase();\n    return ((_p$name = p.name) === null || _p$name === void 0 ? void 0 : _p$name.toLowerCase().includes(searchLower)) || ((_p$identificationNumb = p.identificationNumber) === null || _p$identificationNumb === void 0 ? void 0 : _p$identificationNumb.toLowerCase().includes(searchLower)) || ((_p$address = p.address) === null || _p$address === void 0 ? void 0 : _p$address.toLowerCase().includes(searchLower));\n  });\n  const toggleParticipantSelection = participant => {\n    const isSelected = selectedParticipants.some(p => p.id === participant.id);\n    if (isSelected) {\n      setSelectedParticipants(selectedParticipants.filter(p => p.id !== participant.id));\n    } else {\n      setSelectedParticipants([...selectedParticipants, participant]);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Export Data\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: '#666',\n        marginBottom: '30px'\n      },\n      children: \"Export participant and program data to CSV format for Qualtrics upload and reporting, or export selected participants as PDF.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'white',\n        border: '1px solid #e1e5e9',\n        borderRadius: '8px',\n        padding: '30px',\n        maxWidth: '600px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          margin: '0 0 20px 0'\n        },\n        children: \"Export Options\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'block',\n            marginBottom: '8px',\n            fontWeight: '500'\n          },\n          children: \"Export Type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: exportType,\n          onChange: e => setExportType(e.target.value),\n          style: {\n            width: '100%',\n            padding: '8px 12px',\n            border: '1px solid #ddd',\n            borderRadius: '4px',\n            fontSize: '14px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"participants\",\n            children: \"Participants Only\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"programs\",\n            children: \"Programs Only\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"combined\",\n            children: \"Combined Data\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '12px',\n            color: '#666',\n            margin: '5px 0 0 0'\n          },\n          children: [exportType === 'participants' && 'Export all participant data (excluding images)', exportType === 'programs' && 'Export all program data', exportType === 'combined' && 'Export participants and programs in a combined format']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: '#f8d7da',\n          color: '#721c24',\n          padding: '10px 15px',\n          borderRadius: '4px',\n          marginBottom: '20px',\n          border: '1px solid #f5c6cb'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 11\n      }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: '#d4edda',\n          color: '#155724',\n          padding: '10px 15px',\n          borderRadius: '4px',\n          marginBottom: '20px',\n          border: '1px solid #c3e6cb'\n        },\n        children: \"\\u2705 Export completed successfully! File downloaded.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleExport,\n        disabled: loading,\n        style: {\n          background: loading ? '#6c757d' : '#28a745',\n          color: 'white',\n          border: 'none',\n          padding: '12px 24px',\n          borderRadius: '5px',\n          cursor: loading ? 'not-allowed' : 'pointer',\n          fontSize: '16px',\n          fontWeight: '500',\n          width: '100%',\n          opacity: loading ? 0.6 : 1\n        },\n        children: loading ? 'Exporting...' : `Export ${exportType.charAt(0).toUpperCase() + exportType.slice(1)}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '30px',\n          padding: '15px',\n          background: '#f8f9fa',\n          borderRadius: '4px',\n          fontSize: '13px',\n          color: '#666'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Note:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this), \" The exported CSV file is formatted for Qualtrics upload. Images are excluded from the export. The file will be named with today's date for easy organization.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'white',\n        border: '1px solid #e1e5e9',\n        borderRadius: '8px',\n        padding: '30px',\n        maxWidth: '800px',\n        marginTop: '30px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: '0'\n          },\n          children: \"Export Participants as PDF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setShowPdfExport(!showPdfExport);\n            if (!showPdfExport) {\n              setSelectedParticipants([]);\n              setSearchTerm('');\n            }\n          },\n          style: {\n            background: showPdfExport ? '#6c757d' : '#667eea',\n            color: 'white',\n            border: 'none',\n            padding: '8px 16px',\n            borderRadius: '5px',\n            cursor: 'pointer',\n            fontSize: '14px'\n          },\n          children: showPdfExport ? 'Hide' : 'Show PDF Export'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this), showPdfExport && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#666',\n            marginBottom: '20px',\n            fontSize: '14px'\n          },\n          children: \"Select participants to export as PDF. The PDF will include name, address, ID number, and profile photo, with two participants per page.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '20px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              marginBottom: '8px',\n              fontWeight: '500'\n            },\n            children: \"Search Participants\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: searchTerm,\n            onChange: e => setSearchTerm(e.target.value),\n            placeholder: \"Search by name, ID number, or address...\",\n            style: {\n              width: '100%',\n              padding: '8px 12px',\n              border: '1px solid #ddd',\n              borderRadius: '4px',\n              fontSize: '14px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this), selectedParticipants.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: '#e7f3ff',\n            padding: '10px 15px',\n            borderRadius: '4px',\n            marginBottom: '15px',\n            fontSize: '14px',\n            color: '#0066cc'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: selectedParticipants.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 17\n          }, this), \" participant(s) selected\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            maxHeight: '400px',\n            overflowY: 'auto',\n            border: '1px solid #e1e5e9',\n            borderRadius: '4px',\n            marginBottom: '20px'\n          },\n          children: filteredParticipants.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '20px',\n              textAlign: 'center',\n              color: '#666'\n            },\n            children: searchTerm ? 'No participants found matching your search' : 'No participants available'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 17\n          }, this) : filteredParticipants.map(participant => {\n            var _participant$headshot2;\n            const isSelected = selectedParticipants.some(p => p.id === participant.id);\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => toggleParticipantSelection(participant),\n              style: {\n                padding: '12px 15px',\n                borderBottom: '1px solid #e1e5e9',\n                cursor: 'pointer',\n                background: isSelected ? '#e7f3ff' : 'white',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '12px',\n                transition: 'background 0.2s'\n              },\n              onMouseEnter: e => {\n                if (!isSelected) e.currentTarget.style.background = '#f8f9fa';\n              },\n              onMouseLeave: e => {\n                if (!isSelected) e.currentTarget.style.background = 'white';\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                checked: isSelected,\n                onChange: () => toggleParticipantSelection(participant),\n                onClick: e => e.stopPropagation(),\n                style: {\n                  cursor: 'pointer'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 23\n              }, this), participant.headshotPictureUrl && /*#__PURE__*/_jsxDEV(\"img\", {\n                src: ((_participant$headshot2 = participant.headshotPictureUrl) === null || _participant$headshot2 === void 0 ? void 0 : _participant$headshot2.url) || participant.headshotPictureUrl,\n                alt: participant.name,\n                style: {\n                  width: '40px',\n                  height: '40px',\n                  borderRadius: '50%',\n                  objectFit: 'cover',\n                  border: '2px solid #e1e5e9'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  flex: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontWeight: '500',\n                    color: '#333'\n                  },\n                  children: participant.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 454,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '12px',\n                    color: '#666',\n                    marginTop: '2px'\n                  },\n                  children: [\"ID: \", participant.identificationNumber || 'N/A', participant.address && ` • ${participant.address}`]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 455,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 23\n              }, this)]\n            }, participant.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handlePdfExport,\n          disabled: pdfLoading || selectedParticipants.length === 0,\n          style: {\n            background: pdfLoading || selectedParticipants.length === 0 ? '#6c757d' : '#dc3545',\n            color: 'white',\n            border: 'none',\n            padding: '12px 24px',\n            borderRadius: '5px',\n            cursor: pdfLoading || selectedParticipants.length === 0 ? 'not-allowed' : 'pointer',\n            fontSize: '16px',\n            fontWeight: '500',\n            width: '100%',\n            opacity: pdfLoading || selectedParticipants.length === 0 ? 0.6 : 1\n          },\n          children: pdfLoading ? 'Generating PDF...' : `Export ${selectedParticipants.length} Participant(s) as PDF`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '20px',\n            padding: '15px',\n            background: '#f8f9fa',\n            borderRadius: '4px',\n            fontSize: '13px',\n            color: '#666'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Note:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 15\n          }, this), \" The PDF will include two participants per page with their profile photos, names, addresses, and ID numbers.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 225,\n    columnNumber: 5\n  }, this);\n};\n_s(Export, \"9ROFWKrLRIDAx8J+h5ZuyYp8bcw=\");\n_c = Export;\nexport default Export;\nvar _c;\n$RefreshReg$(_c, \"Export\");","map":{"version":3,"names":["React","useState","useEffect","exportParticipantsCsv","fetchParticipants","api","jsPDF","jsxDEV","_jsxDEV","Export","_s","loading","setLoading","exportType","setExportType","success","setSuccess","error","setError","allParticipants","setAllParticipants","selectedParticipants","setSelectedParticipants","searchTerm","setSearchTerm","showPdfExport","setShowPdfExport","pdfLoading","setPdfLoading","loadParticipants","_response$data","response","participants","data","activeParticipants","filter","p","isActive","err","console","handleExport","filename","Date","toISOString","split","get","responseType","url","window","URL","createObjectURL","Blob","type","a","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","setTimeout","_err$response","_err$response$data","imageToBase64","Promise","resolve","reject","img","Image","crossOrigin","onload","canvas","width","height","ctx","getContext","drawImage","base64","toDataURL","e","onerror","src","handlePdfExport","length","pdf","pageWidth","internal","pageSize","getWidth","pageHeight","getHeight","margin","contentWidth","participantWidth","participantHeight","currentY","participantIndex","addPage","col","_participant$headshot","participant","x","name","address","idNumber","identificationNumber","photoUrl","headshotPictureUrl","setDrawColor","setLineWidth","rect","base64Image","imgWidth","imgHeight","addImage","textX","textY","setFontSize","setFont","undefined","text","addressLines","splitTextToSize","save","filteredParticipants","_p$name","_p$identificationNumb","_p$address","searchLower","toLowerCase","includes","toggleParticipantSelection","isSelected","some","id","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","color","marginBottom","background","border","borderRadius","maxWidth","display","fontWeight","value","onChange","target","fontSize","onClick","disabled","cursor","opacity","charAt","toUpperCase","slice","marginTop","justifyContent","alignItems","placeholder","maxHeight","overflowY","textAlign","map","_participant$headshot2","borderBottom","gap","transition","onMouseEnter","currentTarget","onMouseLeave","checked","stopPropagation","alt","objectFit","flex","_c","$RefreshReg$"],"sources":["/Users/sareena/HeartSmiles/heart-smiles-tracker/src/pages/Export.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { exportParticipantsCsv, fetchParticipants } from '../services/api';\nimport api from '../services/api';\nimport jsPDF from 'jspdf';\n\nconst Export = () => {\n  const [loading, setLoading] = useState(false);\n  const [exportType, setExportType] = useState('participants');\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState('');\n  \n  // PDF export state\n  const [allParticipants, setAllParticipants] = useState([]);\n  const [selectedParticipants, setSelectedParticipants] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showPdfExport, setShowPdfExport] = useState(false);\n  const [pdfLoading, setPdfLoading] = useState(false);\n\n  useEffect(() => {\n    if (showPdfExport) {\n      loadParticipants();\n    }\n  }, [showPdfExport]);\n\n  const loadParticipants = async () => {\n    try {\n      const response = await fetchParticipants();\n      const participants = response.data?.participants || response.data || [];\n      const activeParticipants = participants.filter(p => p.isActive !== false);\n      setAllParticipants(activeParticipants);\n    } catch (err) {\n      console.error('Error loading participants:', err);\n      setError('Failed to load participants');\n    }\n  };\n\n  const handleExport = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      setSuccess(false);\n\n      let response;\n      let filename;\n\n      if (exportType === 'participants') {\n        response = await exportParticipantsCsv();\n        filename = `participants_${new Date().toISOString().split('T')[0]}.csv`;\n      } else if (exportType === 'programs') {\n        response = await api.get('/export/programs', { responseType: 'blob' });\n        filename = `programs_${new Date().toISOString().split('T')[0]}.csv`;\n      } else {\n        response = await api.get('/export/combined', { responseType: 'blob' });\n        filename = `combined_data_${new Date().toISOString().split('T')[0]}.csv`;\n      }\n\n      // Create download link\n      const url = window.URL.createObjectURL(new Blob([response.data], { type: 'text/csv' }));\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = filename;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n\n      setSuccess(true);\n      setTimeout(() => setSuccess(false), 3000);\n    } catch (err) {\n      console.error('Export error:', err);\n      setError(err?.response?.data?.error || 'Export failed. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Helper function to convert image URL to base64\n  const imageToBase64 = (url) => {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.crossOrigin = 'anonymous';\n      img.onload = () => {\n        const canvas = document.createElement('canvas');\n        canvas.width = img.width;\n        canvas.height = img.height;\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(img, 0, 0);\n        try {\n          const base64 = canvas.toDataURL('image/jpeg', 0.8);\n          resolve(base64);\n        } catch (e) {\n          reject(e);\n        }\n      };\n      img.onerror = () => {\n        // If image fails to load, return null\n        resolve(null);\n      };\n      img.src = url;\n    });\n  };\n\n  const handlePdfExport = async () => {\n    if (selectedParticipants.length === 0) {\n      setError('Please select at least one participant');\n      return;\n    }\n\n    try {\n      setPdfLoading(true);\n      setError('');\n      setSuccess(false);\n\n      const pdf = new jsPDF('portrait', 'mm', 'a4');\n      const pageWidth = pdf.internal.pageSize.getWidth();\n      const pageHeight = pdf.internal.pageSize.getHeight();\n      const margin = 15;\n      const contentWidth = pageWidth - (margin * 2);\n      const participantWidth = (contentWidth - 10) / 2; // Two participants per row, 10mm gap\n      const participantHeight = 80; // Height for each participant card\n\n      let currentY = margin;\n      let participantIndex = 0;\n\n      while (participantIndex < selectedParticipants.length) {\n        // Check if we need a new page\n        if (currentY + participantHeight > pageHeight - margin) {\n          pdf.addPage();\n          currentY = margin;\n        }\n\n        // Process two participants per row\n        for (let col = 0; col < 2 && participantIndex < selectedParticipants.length; col++) {\n          const participant = selectedParticipants[participantIndex];\n          const x = margin + (col * (participantWidth + 10));\n\n          // Get participant data\n          const name = participant.name || 'N/A';\n          const address = participant.address || 'N/A';\n          const idNumber = participant.identificationNumber || 'N/A';\n          const photoUrl = participant.headshotPictureUrl?.url || participant.headshotPictureUrl || null;\n\n          // Draw border for participant card\n          pdf.setDrawColor(200, 200, 200);\n          pdf.setLineWidth(0.5);\n          pdf.rect(x, currentY, participantWidth, participantHeight);\n\n          // Add profile photo\n          if (photoUrl) {\n            try {\n              const base64Image = await imageToBase64(photoUrl);\n              if (base64Image) {\n                const imgWidth = 30;\n                const imgHeight = 30;\n                pdf.addImage(base64Image, 'JPEG', x + 5, currentY + 5, imgWidth, imgHeight);\n              }\n            } catch (e) {\n              console.error('Error loading image:', e);\n            }\n          }\n\n          // Add participant information\n          const textX = photoUrl ? x + 40 : x + 5;\n          let textY = currentY + 10;\n\n          // Name\n          pdf.setFontSize(12);\n          pdf.setFont(undefined, 'bold');\n          pdf.text(name, textX, textY);\n          textY += 7;\n\n          // ID Number\n          pdf.setFontSize(10);\n          pdf.setFont(undefined, 'normal');\n          pdf.text(`ID: ${idNumber}`, textX, textY);\n          textY += 6;\n\n          // Address (may need to wrap)\n          pdf.setFontSize(9);\n          const addressLines = pdf.splitTextToSize(`Address: ${address}`, participantWidth - 45);\n          pdf.text(addressLines, textX, textY);\n\n          participantIndex++;\n        }\n\n        // Move to next row\n        currentY += participantHeight + 5;\n      }\n\n      // Save PDF\n      const filename = `participants_export_${new Date().toISOString().split('T')[0]}.pdf`;\n      pdf.save(filename);\n\n      setSuccess(`PDF exported successfully with ${selectedParticipants.length} participant(s)!`);\n      setTimeout(() => setSuccess(''), 3000);\n      setSelectedParticipants([]);\n      setSearchTerm('');\n    } catch (err) {\n      console.error('PDF export error:', err);\n      setError('Failed to generate PDF. Please try again.');\n    } finally {\n      setPdfLoading(false);\n    }\n  };\n\n  const filteredParticipants = allParticipants.filter(p => {\n    const searchLower = searchTerm.toLowerCase();\n    return (\n      p.name?.toLowerCase().includes(searchLower) ||\n      p.identificationNumber?.toLowerCase().includes(searchLower) ||\n      p.address?.toLowerCase().includes(searchLower)\n    );\n  });\n\n  const toggleParticipantSelection = (participant) => {\n    const isSelected = selectedParticipants.some(p => p.id === participant.id);\n    if (isSelected) {\n      setSelectedParticipants(selectedParticipants.filter(p => p.id !== participant.id));\n    } else {\n      setSelectedParticipants([...selectedParticipants, participant]);\n    }\n  };\n\n  return (\n    <div style={{ padding: '20px' }}>\n      <h1>Export Data</h1>\n      <p style={{ color: '#666', marginBottom: '30px' }}>\n        Export participant and program data to CSV format for Qualtrics upload and reporting, or export selected participants as PDF.\n      </p>\n\n      <div style={{\n        background: 'white',\n        border: '1px solid #e1e5e9',\n        borderRadius: '8px',\n        padding: '30px',\n        maxWidth: '600px'\n      }}>\n        <h3 style={{ margin: '0 0 20px 0' }}>Export Options</h3>\n        \n        <div style={{ marginBottom: '20px' }}>\n          <label style={{ display: 'block', marginBottom: '8px', fontWeight: '500' }}>\n            Export Type\n          </label>\n          <select\n            value={exportType}\n            onChange={(e) => setExportType(e.target.value)}\n            style={{\n              width: '100%',\n              padding: '8px 12px',\n              border: '1px solid #ddd',\n              borderRadius: '4px',\n              fontSize: '14px'\n            }}\n          >\n            <option value=\"participants\">Participants Only</option>\n            <option value=\"programs\">Programs Only</option>\n            <option value=\"combined\">Combined Data</option>\n          </select>\n          <p style={{ fontSize: '12px', color: '#666', margin: '5px 0 0 0' }}>\n            {exportType === 'participants' && 'Export all participant data (excluding images)'}\n            {exportType === 'programs' && 'Export all program data'}\n            {exportType === 'combined' && 'Export participants and programs in a combined format'}\n          </p>\n        </div>\n\n        {error && (\n          <div style={{\n            background: '#f8d7da',\n            color: '#721c24',\n            padding: '10px 15px',\n            borderRadius: '4px',\n            marginBottom: '20px',\n            border: '1px solid #f5c6cb'\n          }}>\n            {error}\n          </div>\n        )}\n\n        {success && (\n          <div style={{\n            background: '#d4edda',\n            color: '#155724',\n            padding: '10px 15px',\n            borderRadius: '4px',\n            marginBottom: '20px',\n            border: '1px solid #c3e6cb'\n          }}>\n            ✅ Export completed successfully! File downloaded.\n          </div>\n        )}\n\n        <button\n          onClick={handleExport}\n          disabled={loading}\n          style={{\n            background: loading ? '#6c757d' : '#28a745',\n            color: 'white',\n            border: 'none',\n            padding: '12px 24px',\n            borderRadius: '5px',\n            cursor: loading ? 'not-allowed' : 'pointer',\n            fontSize: '16px',\n            fontWeight: '500',\n            width: '100%',\n            opacity: loading ? 0.6 : 1\n          }}\n        >\n          {loading ? 'Exporting...' : `Export ${exportType.charAt(0).toUpperCase() + exportType.slice(1)}`}\n        </button>\n\n        <div style={{\n          marginTop: '30px',\n          padding: '15px',\n          background: '#f8f9fa',\n          borderRadius: '4px',\n          fontSize: '13px',\n          color: '#666'\n        }}>\n          <strong>Note:</strong> The exported CSV file is formatted for Qualtrics upload. Images are excluded from the export. \n          The file will be named with today's date for easy organization.\n        </div>\n      </div>\n\n      {/* PDF Export Section */}\n      <div style={{\n        background: 'white',\n        border: '1px solid #e1e5e9',\n        borderRadius: '8px',\n        padding: '30px',\n        maxWidth: '800px',\n        marginTop: '30px'\n      }}>\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\n          <h3 style={{ margin: '0' }}>Export Participants as PDF</h3>\n          <button\n            onClick={() => {\n              setShowPdfExport(!showPdfExport);\n              if (!showPdfExport) {\n                setSelectedParticipants([]);\n                setSearchTerm('');\n              }\n            }}\n            style={{\n              background: showPdfExport ? '#6c757d' : '#667eea',\n              color: 'white',\n              border: 'none',\n              padding: '8px 16px',\n              borderRadius: '5px',\n              cursor: 'pointer',\n              fontSize: '14px'\n            }}\n          >\n            {showPdfExport ? 'Hide' : 'Show PDF Export'}\n          </button>\n        </div>\n\n        {showPdfExport && (\n          <div>\n            <p style={{ color: '#666', marginBottom: '20px', fontSize: '14px' }}>\n              Select participants to export as PDF. The PDF will include name, address, ID number, and profile photo, with two participants per page.\n            </p>\n\n            {/* Search Box */}\n            <div style={{ marginBottom: '20px' }}>\n              <label style={{ display: 'block', marginBottom: '8px', fontWeight: '500' }}>\n                Search Participants\n              </label>\n              <input\n                type=\"text\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                placeholder=\"Search by name, ID number, or address...\"\n                style={{\n                  width: '100%',\n                  padding: '8px 12px',\n                  border: '1px solid #ddd',\n                  borderRadius: '4px',\n                  fontSize: '14px'\n                }}\n              />\n            </div>\n\n            {/* Selected Participants Count */}\n            {selectedParticipants.length > 0 && (\n              <div style={{\n                background: '#e7f3ff',\n                padding: '10px 15px',\n                borderRadius: '4px',\n                marginBottom: '15px',\n                fontSize: '14px',\n                color: '#0066cc'\n              }}>\n                <strong>{selectedParticipants.length}</strong> participant(s) selected\n              </div>\n            )}\n\n            {/* Participant List */}\n            <div style={{\n              maxHeight: '400px',\n              overflowY: 'auto',\n              border: '1px solid #e1e5e9',\n              borderRadius: '4px',\n              marginBottom: '20px'\n            }}>\n              {filteredParticipants.length === 0 ? (\n                <div style={{ padding: '20px', textAlign: 'center', color: '#666' }}>\n                  {searchTerm ? 'No participants found matching your search' : 'No participants available'}\n                </div>\n              ) : (\n                filteredParticipants.map((participant) => {\n                  const isSelected = selectedParticipants.some(p => p.id === participant.id);\n                  return (\n                    <div\n                      key={participant.id}\n                      onClick={() => toggleParticipantSelection(participant)}\n                      style={{\n                        padding: '12px 15px',\n                        borderBottom: '1px solid #e1e5e9',\n                        cursor: 'pointer',\n                        background: isSelected ? '#e7f3ff' : 'white',\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '12px',\n                        transition: 'background 0.2s'\n                      }}\n                      onMouseEnter={(e) => {\n                        if (!isSelected) e.currentTarget.style.background = '#f8f9fa';\n                      }}\n                      onMouseLeave={(e) => {\n                        if (!isSelected) e.currentTarget.style.background = 'white';\n                      }}\n                    >\n                      <input\n                        type=\"checkbox\"\n                        checked={isSelected}\n                        onChange={() => toggleParticipantSelection(participant)}\n                        onClick={(e) => e.stopPropagation()}\n                        style={{ cursor: 'pointer' }}\n                      />\n                      {participant.headshotPictureUrl && (\n                        <img\n                          src={participant.headshotPictureUrl?.url || participant.headshotPictureUrl}\n                          alt={participant.name}\n                          style={{\n                            width: '40px',\n                            height: '40px',\n                            borderRadius: '50%',\n                            objectFit: 'cover',\n                            border: '2px solid #e1e5e9'\n                          }}\n                        />\n                      )}\n                      <div style={{ flex: 1 }}>\n                        <div style={{ fontWeight: '500', color: '#333' }}>{participant.name}</div>\n                        <div style={{ fontSize: '12px', color: '#666', marginTop: '2px' }}>\n                          ID: {participant.identificationNumber || 'N/A'}\n                          {participant.address && ` • ${participant.address}`}\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })\n              )}\n            </div>\n\n            {/* Export Button */}\n            <button\n              onClick={handlePdfExport}\n              disabled={pdfLoading || selectedParticipants.length === 0}\n              style={{\n                background: (pdfLoading || selectedParticipants.length === 0) ? '#6c757d' : '#dc3545',\n                color: 'white',\n                border: 'none',\n                padding: '12px 24px',\n                borderRadius: '5px',\n                cursor: (pdfLoading || selectedParticipants.length === 0) ? 'not-allowed' : 'pointer',\n                fontSize: '16px',\n                fontWeight: '500',\n                width: '100%',\n                opacity: (pdfLoading || selectedParticipants.length === 0) ? 0.6 : 1\n              }}\n            >\n              {pdfLoading ? 'Generating PDF...' : `Export ${selectedParticipants.length} Participant(s) as PDF`}\n            </button>\n\n            <div style={{\n              marginTop: '20px',\n              padding: '15px',\n              background: '#f8f9fa',\n              borderRadius: '4px',\n              fontSize: '13px',\n              color: '#666'\n            }}>\n              <strong>Note:</strong> The PDF will include two participants per page with their profile photos, names, addresses, and ID numbers.\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Export;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}